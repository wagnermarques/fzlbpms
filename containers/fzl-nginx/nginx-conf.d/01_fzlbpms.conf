server {
    listen 8899;
    server_name seu-dominio.com;
    root /var/www/html;
    index index.php index.html index.htm;


   # Redirect /karafconsole to Karaf web console (strip prefix)
   location /karafconsole/ {
       # Proxy pass to Karaf container, stripping the /karafconsole prefix
       rewrite ^/karafconsole/(.*)$ /$1 break;
       proxy_pass http://fzl-karaf-camel-integration:8181;
       
       # Proxy settings
       proxy_set_header Host $host;
       proxy_set_header X-Real-IP $remote_addr;
       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       proxy_set_header X-Forwarded-Proto $scheme;
       
       # WebSocket support (if needed)
       proxy_http_version 1.1;
       proxy_set_header Upgrade $http_upgrade;
       proxy_set_header Connection "upgrade";
       
       # Headers de seguranca
       add_header X-Frame-Options SAMEORIGIN;
       add_header X-Content-Type-Options nosniff;
       add_header X-XSS-Protection "1; mode=block";
   }

}